import{d as C,r,o as S,c as $,w as h,a as o,b as n,e as t,f as _,_ as P,F as u,g as v,n as g,h as j,i as B,t as d,j as D,k as f}from"./main-qbu05jWT.js";import{a as L,b as T}from"./products-Bl5fZNFl.js";const V={class:"container"},z={class:"container mt-md-5 mt-3 mb-7"},A={class:"row"},G={class:"col-md-4"},M={class:"accordion border border-bottom border-top-0 border-start-0 border-end-0 mb-3",id:"accordionExample"},O={class:"card border-0"},E={id:"collapseOne",class:"collapse show","aria-labelledby":"headingOne","data-bs-parent":"#accordionExample"},F={class:"card-body py-0"},H={class:"list-unstyled"},W=["onClick"],I={class:"col-md-8"},N={class:"row"},R={class:"card border-0 mb-4 position-relative position-relative"},q=["src"],U={class:"card-body p-0"},Y={class:"mb-0 mt-3"},J={class:"card-text mb-0"},K={class:"text-muted"},Q={class:"d-flex justify-content-center"},X={class:"pagination"},Z={class:"page-item"},tt=["disabled"],et=["onClick","disabled"],st={class:"page-item"},at=["disabled"],it=C({__name:"ProductsView",setup(ot){const a=r("1"),c=r(""),m=r([]),p=r([]),l=r({total_pages:0,current_page:0,has_pre:!1,has_next:!1,category:""}),b=async()=>{try{const i=await L({page:a.value,category:c.value});m.value=i.data.products,l.value=i.data.pagination}catch{alert("取得產品列表失敗")}},y=async()=>{try{const i=await T();p.value=i.data.products}catch{alert("取得所有產品列表失敗")}};S(()=>{b(),y()});const x=$(()=>p.value?[...new Set(p.value.map(s=>s.category))]:[]);return h(c,()=>{a.value="1",b()}),h(a,()=>{b()}),(i,s)=>{const k=B("RouterLink");return n(),o(u,null,[t("div",V,[_(P)]),s[7]||(s[7]=t("div",{class:"position-relative d-flex align-items-center justify-content-center",style:{"min-height":"400px"}},[t("div",{class:"position-absolute",style:{top:"0",bottom:"0",left:"0",right:"0","background-image":"url(https://images.unsplash.com/photo-1656275537622-7837184a0dcc?q=80&w=1350&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D)","background-position":"center center","background-size":"cover","background-repeat":"no-repeat",opacity:"0.1"}}),t("h2",{class:"fw-bold"},"產品列表")],-1)),t("div",z,[t("div",A,[t("div",G,[t("div",M,[t("div",O,[s[3]||(s[3]=t("div",{class:"card-header px-0 py-4 bg-white border border-bottom-0 border-top border-start-0 border-end-0 rounded-0",id:"headingOne","data-bs-toggle":"collapse","data-bs-target":"#collapseOne"},[t("div",{class:"d-flex justify-content-between align-items-center pe-1"},[t("h4",{class:"mb-0"},"分類"),t("i",{class:"fas fa-chevron-down"})])],-1)),t("div",E,[t("div",F,[t("ul",H,[t("li",null,[t("button",{onClick:s[0]||(s[0]=e=>c.value=""),class:"d-block py-2 border-0 bg-transparent text-muted",type:"button"}," 全部 ")]),(n(!0),o(u,null,v(x.value,e=>(n(),o("li",{key:e},[t("button",{onClick:w=>c.value=e,class:"d-block py-2 border-0 bg-transparent text-muted",type:"button"},d(e),9,W)]))),128))])])])])])]),t("div",I,[t("div",N,[(n(!0),o(u,null,v(m.value,e=>(n(),o("div",{key:e.id,class:"col-md-6"},[t("div",R,[t("img",{style:{height:"320px"},src:e.imageUrl,class:"card-img-top object-fit-cover rounded-0",alt:"琴葉榕"},null,8,q),s[4]||(s[4]=t("button",{type:"button",class:"position-absolute text-dark border-0 bg-transparent",style:{right:"16px",top:"16px"}},[t("i",{class:"far fa-heart"})],-1)),t("div",U,[t("h4",Y,[_(k,{to:`/products/${e.id}`},{default:D(()=>[f(d(e.title),1)]),_:2},1032,["to"])]),t("p",J,[f(" NT$"+d(e.price?.toLocaleString("zh-TW"))+" ",1),t("span",K,[t("del",null,"NT$"+d(e.origin_price?.toLocaleString("zh-TW")),1)])])])])]))),128))]),t("nav",Q,[t("ul",X,[t("li",Z,[t("button",{onClick:s[1]||(s[1]=e=>a.value=(parseInt(a.value)-1).toString()),disabled:!l.value?.has_pre,type:"button",class:g(["page-link",{disabled:!l.value?.has_pre}]),"aria-label":"Previous"},[...s[5]||(s[5]=[t("span",{"aria-hidden":"true"},"«",-1)])],10,tt)]),(n(!0),o(u,null,v(l.value?.total_pages,e=>(n(),o("li",{key:e,class:g(["page-item",{active:a.value===e.toString()}])},[t("button",{onClick:w=>a.value=e.toString(),disabled:a.value===e.toString(),class:"page-link",type:"button"},d(e),9,et)],2))),128)),t("li",st,[t("button",{onClick:s[2]||(s[2]=e=>a.value=(parseInt(a.value)+1).toString()),disabled:!l.value?.has_next,class:g(["page-link",{disabled:!l.value?.has_next}]),type:"button","aria-label":"Next"},[...s[6]||(s[6]=[t("span",{"aria-hidden":"true"},"»",-1)])],10,at)])])])])])]),_(j)],64)}}});export{it as default};
